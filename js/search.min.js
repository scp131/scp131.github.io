(function(){var n,t=window||this,e=t.BLOG.even,i=t.BLOG.$,s=i("#search"),r=i("#search-wrap"),a=i("#key"),o=i("#back"),c=i("#search-panel"),l=i("#search-result"),u=i("#search-tpl").innerHTML,f=(t.BLOG.ROOT+"/index.json").replace(/\/{2}/g,"/");t.BLOG.noop;var d=i("html"),p=function(){t.innerWidth<760&&d.classList.add("lock-size"),c.classList.add("in")},v=function(){t.innerWidth<760&&d.classList.remove("lock-size"),c.classList.remove("in")};function L(n,t){return t.lastIndex=0,t.test(n)}function h(t){var e=this.value.trim();if(e){var i=new RegExp(e.replace(/[ ]/g,"|"),"gmi");!function(t){if(n)t(n);else{var e=new XMLHttpRequest;e.open("GET",f,!0),e.onload=function(){if(this.status>=200&&this.status<300){var e=JSON.parse(this.response);n=e instanceof Array?e:e.posts,t(n)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}}((function(n){!function(n){var t="";t=n.length?n.map((function(n){return function(n,t){return n.replace(/\{\w+\}/g,(function(n){var e=n.replace(/\{|\}/g,"");return t[e]||""}))}(u,{title:n.title,path:n.permalink,date:new Date(n.date).toLocaleDateString(),tags:n.tags.map((function(n){return"<span>#"+n+"</span>"})).join("")})})).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',l.innerHTML=t}(n.filter((function(n){return function(n,t){return L(n.title,t)||n.tags.some((function(n){return L(n.name,t)}))||L(n.text,t)}(n,i)}))),p()})),t.preventDefault()}}s.addEventListener(e,(function(){r.classList.toggle("in"),a.value="",r.classList.contains("in")?a.focus():a.blur()})),o.addEventListener(e,(function(){r.classList.remove("in"),v()})),document.addEventListener(e,(function(n){"key"!==n.target.id&&"click"===e&&v()})),a.addEventListener("input",h),a.addEventListener(e,h)}).call(this);